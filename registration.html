<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://db.onlinewebfonts.com/c/97c4b25dc74e0ab045154e75a8fdd69d?family=Game+of+Thrones"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/main.css" />
    <title>MOS2K24</title>
  </head>
  <body>
    <nav id="navbar">
      <a href="#" id="logo">
        <img src="img/logo.png" alt="Logo" style="max-height: 50px" />
      </a>
      <div id="menu-toggle">&#9776;</div>
      <div id="nav-links">
        <a href="index.html">Home</a>
        <a href="registration.html">Registration</a>
        <a href="OCTEAM.HTML">OC Team</a>
        <a href="#">Memories</a>
      </div>
      <div id="mobile-menu">
        <a href="index.html">Home</a>
        <a href="registration.html">Registration</a>
        <a href="OCTEAM.HTML">OC Team</a>
        <a href="#">Memories</a>
      </div>
    </nav>
    <main>
      <div id="form-container">
        <form
          id="registration-form"
          method="POST"
          action="https://script.google.com/macros/s/AKfycbwbhQ6VIfMVhiMkg0mvbyL60jt8BoXHRwqYXowToBx9jbAWuVakgNnUFaxRl5t4qo5r/exec"
        >
          <div class="mb-3">
            <label for="name" style="color: #b08d2a" class="form-label"
              >Name</label
            >
            <input
              type="text"
              class="form-control"
              id="name"
              name="name"
              placeholder="Enter your name"
              required
            />
          </div>
          <div class="mb-3">
            <label style="color: #b08d2a" for="email" class="form-label"
              >Email address</label
            >
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              placeholder="Enter your email"
              required
            />
          </div>
          <div class="mb-3">
            <label style="color: #b08d2a" for="phone" class="form-label"
              >Phone Number</label
            >
            <input
              type="text"
              class="form-control"
              id="phone"
              name="phone"
              placeholder="Enter your Phone Number"
              required
              maxlength="11"
              oninput="validatePhoneInput(this)"
              onkeypress="allowOnlyNumbers(event)"
              value="+216"
            />
          </div>
          <div class="mb-3">
            <label
              style="color: #b08d2a"
              for="emergencyPhone"
              class="form-label"
              >Emergency Phone Number</label
            >
            <input
              type="text"
              class="form-control"
              id="emergencyPhone"
              name="emergencyPhone"
              placeholder="Enter your Emergency Phone Number"
              required
              maxlength="11"
              oninput="validatePhoneInput(this)"
              onkeypress="allowOnlyNumbers(event)"
              value="+216"
            />
          </div>
          <div class="mb-3">
            <label style="color: #b08d2a" for="subject" class="form-label"
              >Department</label
            >
            <div class="custom-select" >
              <div class="select-button" id="selectButtonDep">Select</div>
              <div class="select-options" id="selectOptionsDep">
                <div class="optionDep" data-value="IGV">IGV</div>
                <div class="optionDep" data-value="OGV">OGV</div>
                <div class="optionDep" data-value="IGT">IGT</div>
                <div class="optionDep" data-value="OGT">OGT</div>
                <div class="optionDep" data-value="MKT&IM">MKT&IM</div>
                <div class="optionDep" data-value="BD&EWA">BD&EWA</div>
                <div class="optionDep" data-value="TM">TM</div>
              </div>
              <input
                type="hidden"
                id="selectedValueDep"
                name="department"
                value=""
                required
              />
            </div>
          </div>
          <div class="mb-3">
            <label style="color: #b08d2a" for="subject" class="form-label"
              >Position</label
            >
            <div class="custom-select">
              <div class="select-button" id="selectButtonPos">Select</div>
              <div class="select-options" id="selectOptionsPos">
                <div class="optionPos" data-value="Newbie">
                    Newbie
                  </div>
                <div class="optionPos" data-value="Members Staying">
                  Members Staying
                </div>
                <div class="optionPos" data-value="Members Leaving">
                  Members Leaving
                </div>
                <div class="optionPos" data-value="Middle Managers Current">
                  Middle Managers Current
                </div>
                <div class="optionPos" data-value="Middle Managers Select">
                  Middle Managers Select
                </div>
                <div class="optionPos" data-value="Middle Managers Select">
                    Middle Managers Select
                  </div>
              </div>
              <input
                type="hidden"
                id="selectedValuePos"
                name="position"
                value=""
                required
              />
            </div>
          </div>
          <div class="mb-3">
            <label style="color: #b08d2a" for="allergy" class="form-label"
              >Allergy</label
            >
            <input
              type="text"
              class="form-control"
              id="allergy"
              name="allergy"
              placeholder="Enter your Allergy"
              required
            />
          </div>
          <div class="mb-3">
            <label style="color: #b08d2a" for="ocExpectation" class="form-label"
              >What are your Expectation from the OC team?</label
            >
            <input
              type="text"
              class="form-control"
              id="ocExpectation"
              name="ocExpectation"
              placeholder="Enter OC Expectation"
              required
            />
          </div>
          <div class="mb-3">
            <label
              style="color: #b08d2a"
              for="faciExpectation"
              class="form-label"
              >What are your Expectation from the FACI team?</label
            >
            <input
              type="text"
              class="form-control"
              id="faciExpectation"
              name="faciExpectation"
              placeholder="Enter FACI Expectation"
              required
            />
          </div>
          <div class="mb-3">
            <label
              style="color: #b08d2a"
              for="chairExpectation"
              class="form-label"
              >What are your Expectation from the Chair?</label
            >
            <input
              type="text"
              class="form-control"
              id="chairExpectation"
              name="chairExpectation"
              placeholder="Enter Chair Expectation"
              required
            />
          </div>
          <div class="mb-3">
            <label
              style="color: #b08d2a"
              for="objectiveFromConference"
              class="form-label"
              >What are your Objectives from this conference?</label
            >
            <input
              type="text"
              class="form-control"
              id="objectiveFromConference"
              name="objectiveFromConference"
              placeholder="Enter Conference Objective"
              required
            />
          </div>
          <div class="mb-3">
            <label
              style="color: #b08d2a"
              for="personalObjective"
              class="form-label"
              >State your personal objective after MOS 2K24</label
            >
            <input
              type="text"
              class="form-control"
              id="personalObjective"
              name="personalObjective"
              placeholder="Enter personal Objective"
              required
            />
          </div>
          <div class="mb-3">
            <label style="color: #b08d2a" for="freeSpace" class="form-label"
              >Free Space</label
            >
            <textarea
              class="form-control"
              id="freeSpace"
              name="freeSpace"
              rows="5"
              placeholder="Enter your message"
            ></textarea>
          </div>
          <div class="mb-3 form-check">
            <input
              type="checkbox"
              class="form-check-input"
              id="terms"
              name="terms"
            />
            <label style="color: white" class="form-check-label" for="terms"
              >I agree to the
              <a
                href="_Indemnity Form MOS 2k24.pdf"
                style="color: rgb(212, 175, 55); text-decoration: none"
                target="_blank"
                >Terms of Use</a
              ></label
            >
          </div>
          <label style="color: #b08d2a" for="signature" class="form-label"
            >Signature</label
          >
          <div id="signature-box">
            <canvas id="signature-pad" width="400" height="200"></canvas>
            <button id="clear-btn">Clear</button>
          </div>
          <button type="submit" id="submit-btn" class="btn btn-primary w-100" disabled>Submit</button>
        </form>
      </div>
    </main>
    <script>
        const termsCheckbox = document.getElementById("terms");
        const submitButton = document.getElementById("submit-btn");
      
        termsCheckbox.addEventListener("change", () => {
          submitButton.disabled = !termsCheckbox.checked;
        });
      </script>

    <script>
      const menuToggle = document.getElementById("menu-toggle");
      const mobileMenu = document.getElementById("mobile-menu");

      menuToggle.addEventListener("click", () => {
        mobileMenu.style.display =
          mobileMenu.style.display === "block" ? "none" : "block";
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function setupDropdown(
        buttonId,
        optionsContainerId,
        selectedValueId,
        optionClass
      ) {
        const selectButton = document.getElementById(buttonId);
        const selectOptions = document.getElementById(optionsContainerId);
        const selectedValue = document.getElementById(selectedValueId);
        const options = selectOptions.querySelectorAll(optionClass);

        selectButton.addEventListener("click", () => {
          selectOptions.classList.toggle("show");
        });

        options.forEach((option) => {
          option.addEventListener("click", () => {
            selectButton.textContent = option.textContent;
            selectedValue.value = option.dataset.value;
            selectOptions.classList.remove("show");
          });
        });

        document.addEventListener("click", (event) => {
          if (
            !selectButton.contains(event.target) &&
            !selectOptions.contains(event.target)
          ) {
            selectOptions.classList.remove("show");
          }
        });
      }

      // Initialize dropdowns
      setupDropdown(
        "selectButtonDep",
        "selectOptionsDep",
        "selectedValueDep",
        ".optionDep"
      );
      setupDropdown(
        "selectButtonPos",
        "selectOptionsPos",
        "selectedValuePos",
        ".optionPos"
      );
    </script>
    <script>
      
      const canvas = document.getElementById("signature-pad");
const context = canvas.getContext("2d");
let drawing = false;

// Set initial drawing properties
context.lineWidth = 3;
context.lineCap = "round";
context.strokeStyle = "#D4AF37"; // Gold color for signature

// Function to get touch coordinates
function getTouchPos(touchEvent) {
  const rect = canvas.getBoundingClientRect();
  return {
    x: touchEvent.touches[0].clientX - rect.left,
    y: touchEvent.touches[0].clientY - rect.top,
  };
}

// Start drawing
canvas.addEventListener("mousedown", (e) => {
  drawing = true;
  context.beginPath();
  context.moveTo(e.offsetX, e.offsetY);
});

canvas.addEventListener("touchstart", (e) => {
  e.preventDefault();
  drawing = true;
  const touchPos = getTouchPos(e);
  context.beginPath();
  context.moveTo(touchPos.x, touchPos.y);
});

// Draw on canvas
canvas.addEventListener("mousemove", (e) => {
  if (drawing) {
    context.lineTo(e.offsetX, e.offsetY);
    context.stroke();
  }
});

canvas.addEventListener("touchmove", (e) => {
  e.preventDefault();
  if (drawing) {
    const touchPos = getTouchPos(e);
    context.lineTo(touchPos.x, touchPos.y);
    context.stroke();
  }
});

// Stop drawing
canvas.addEventListener("mouseup", () => {
  drawing = false;
});

canvas.addEventListener("touchend", () => {
  drawing = false;
});

// Clear the canvas
document.getElementById("clear-btn").addEventListener("click", () => {
  context.clearRect(0, 0, canvas.width, canvas.height);
});

    </script>
    <script>
    const form = document.getElementById("registration-form");
    const canvas2 = document.getElementById("signature-pad");
    form.addEventListener("submit", function (e) {
    e.preventDefault();

    // Convert the canvas2 content to Base64
    const signatureDataUrl = canvas2.toDataURL();

    // Append the signature data to the FormData object
    const data = new FormData(form);
    data.append("signature", signatureDataUrl);

    // Send the form data using fetch
    const action = e.target.action;
    fetch(action, {
      method: "POST",
      body: data,
    })
      .then((response) => {
        if (!response.ok) {
          throw new Error("Network response was not ok");
        }
        return response.json(); // or response.text() if the server returns plain text
      })
      .then((data) => {
        alert("Success");
      })
      .catch((error) => {
        console.error("There was a problem with the fetch operation:", error);
        alert(
          "There was an error with the registration. Please try again."
        );
      });
  });
      </script>
      <script>
        function validatePhoneInput(input) {
    const prefix = '+216';
    let value = input.value;

    // Make sure the value starts with '+216' and only allow the user to input 8 digits afterward
    if (!value.startsWith(prefix)) {
      value = prefix + value.replace(prefix, '');
    }

    // Limit the input to 11 characters (including +216)
    if (value.length > 11) {
      value = value.slice(0, 11);
    }

    input.value = value;
  }

  // Ensure the initial value is correct for both inputs
  document.getElementById('phone').value = '+216';
  document.getElementById('emergencyPhone').value = '+216';
  function allowOnlyNumbers(event) {
    const charCode = event.which || event.keyCode;
    if (charCode < 48 || charCode > 57) {
      event.preventDefault();
    }
  }
      </script>
  </body>
</html>
